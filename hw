import tkinter as tk
from tkinter import messagebox, ttk

# Book storage (in-memory list)
books = []

# Add book
def add_book():
    title = title_entry.get()
    author = author_entry.get()
    year = year_entry.get()
    if title and author and year:
        books.append({'Title': title, 'Author': author, 'Year': year})
        messagebox.showinfo("Success", "Book added successfully!")
        clear_entries()
        view_books()
    else:
        messagebox.showwarning("Input Error", "Please fill all fields.")

# View all books
def view_books():
    book_list.delete(*book_list.get_children())
    for i, book in enumerate(books):
        book_list.insert('', 'end', iid=i, values=(book['Title'], book['Author'], book['Year']))

# Search books
def search_books():
    query = search_entry.get().lower()
    book_list.delete(*book_list.get_children())
    for i, book in enumerate(books):
        if query in book['Title'].lower() or query in book['Author'].lower():
            book_list.insert('', 'end', iid=i, values=(book['Title'], book['Author'], book['Year']))

# Delete selected book
def delete_book():
    selected = book_list.selection()
    if selected:
        index = int(selected[0])
        del books[index]
        view_books()
    else:
        messagebox.showwarning("Selection Error", "Please select a book to delete.")

# Clear input fields
def clear_entries():
    title_entry.delete(0, tk.END)
    author_entry.delete(0, tk.END)
    year_entry.delete(0, tk.END)

# GUI setup
root = tk.Tk()
root.title("Library Book System")

# Input fields
tk.Label(root, text="Title").grid(row=0, column=0)
title_entry = tk.Entry(root)
title_entry.grid(row=0, column=1)

tk.Label(root, text="Author").grid(row=1, column=0)
author_entry = tk.Entry(root)
author_entry.grid(row=1, column=1)

tk.Label(root, text="Year").grid(row=2, column=0)
year_entry = tk.Entry(root)
year_entry.grid(row=2, column=1)

# Buttons
tk.Button(root, text="Add Book", command=add_book).grid(row=3, column=0, pady=5)
tk.Button(root, text="View All", command=view_books).grid(row=3, column=1)
tk.Button(root, text="Delete Book", command=delete_book).grid(row=4, column=0)
tk.Button(root, text="Clear Fields", command=clear_entries).grid(row=4, column=1)

# Search
tk.Label(root, text="Search").grid(row=5, column=0)
search_entry = tk.Entry(root)
search_entry.grid(row=5, column=1)
tk.Button(root, text="Search", command=search_books).grid(row=6, column=0, columnspan=2)

# Book list display
book_list = ttk.Treeview(root, columns=("Title", "Author", "Year"), show='headings')
book_list.heading("Title", text="Title")
book_list.heading("Author", text="Author")
book_list.heading("Year", text="Year")
book_list.grid(row=7, column=0, columnspan=2, pady=10)

root.mainloop()
